{"changed":true,"filter":false,"title":"index.php","tooltip":"/install/index.php","value":"<?php\nini_set('display_errors', 1);\nmysqli_report(MYSQLI_REPORT_STRICT);\nsession_start();\nrequire_once('../module_controll/jr_get_ipaddress.php');\nrequire_once('install.class.php');\nfunction delete($val){\n\t$arr=array(\"'\",'-');\n\treturn $new=str_replace($arr,\"\",$val);\n}\n\n\n?>\n<!DOCTYPE HTML>\n<html>\n<link rel='icon' href='../images/jr-icon.ico' type='image/x-icon' />\n<script type='text/javascript' src='../js/jquery-latest.js'></script>\n<title>Intaller | junior-cms</title>\n<link rel=\"stylesheet\" href=\"css/style.css\" type=\"text/css\" />\n<script type=\"text/javascript\" src=\"js/common.js\"></script>\n<body >\n<div id='logo'><img src='../images/jr_logo.png' alt='Junior Guardian' border='0' /></div>\n<div id='form_container'>\n<div id='form_msg'><span style='font-size:14px;'><strong>Welcome to Junior CMS Installer</strong></span><br>Please enter your website detail below to configuration and setting.</div>  \n<div id='form'> \n\n<?php\n//TODO: variabel $GET[install] kudu di filter, sebelum di proses\n//Hm.., klo uda tahu, koneksinya kenapa harus membuat koneksi lagi ya.., ah aneh nih mah\n// seharusnya, script install ini harus berjalan tanpa harus membuat koneksi terlebih dahulu ke mysql\n// kalo bisa koneksi mah, ngapain harus ngisi lagi username dan password\n$data = new Installer($conn);\n$stepReq = isset($GET['install']) ? \"step1\" : $_GET['install'];\nswitch ($stepReq) {\n\tcase \"step1\" :\n\t\tinclude \"form_site_info.php\";\n\t\tbreak;\n\tcase \"step2\" :\n\t\t$_SESSION['step1'] = array(\n\t\t\t'site_name'=> delete($_POST['site_name']),\n\t\t\t'tag_line'=> delete($_POST['tag_line']),\n\t\t\t'site_url'=> delete($_POST['site_url']),\n\t\t\t'Email'=> delete($_POST['Email']),\n\t\t\t'widget_use'=> delete($_POST['widget_use']));\n\t\tinclude \"form_database_config.php\";\n\t\tbreak;\n\tcase \"step3\" :\n\t\t$_SESSION['step2'] = array(\n\t\t\t'db_host'=> delete($_POST['db_host']),\n\t\t\t'db_name'=> delete($_POST['db_name']),\n\t\t\t'db_user'=> delete($_POST['db_user']),\n\t\t\t'db_password'=> delete($_POST['db_password']));\n\t\tinclude \"form_admin_controll.php\";\n\t\tbreak;\n\tcase \"step4\" :\n\t\t$_SESSION['step3'] = array(\n\t\t\t'username'=> delete($_POST['username']),\n\t\t\t'password'=> delete($_POST['password']));\n\t\tinclude \"form_install.php\";\n\t\tbreak;\n\tcase \"step5\" :\n\t\t$data->addConfiguration('site_name',$_SESSION['step1']['site_name']);\n\t\t$data->addConfiguration('tag_line',$_SESSION['step1']['tag_line']);\n\t\t$data->addConfiguration('site_url',$_SESSION['step1']['site_url']);\n\t\t$data->addConfiguration('Email',$_SESSION['step1']['Email']);\n\t\t$data->addConfiguration('widget_use',$_SESSION['step1']['widget_use']);\n\t\t$data->addConfiguration('db_host',$_SESSION['step2']['db_host']);\t\t\n\t\t$data->addConfiguration('db_user',$_SESSION['step2']['db_user']);\n\t\t$data->addConfiguration('db_password',$_SESSION['step2']['db_password']);\n\t\t$data->addConfiguration('db_name',$_SESSION['step2']['db_name']);\n\t\t$data->addConfiguration('username',$_SESSION['step3']['username']);\n\t\t$data->addConfiguration('password',$_SESSION['step3']['password']);\n\t\t$result=$data->run();\n\t\tbreak;\n\t\n}\nexit;\n?>\n</div>\n  <div id='extra_info'>\n    <table width='100%' border='0' cellspacing='0' cellpadding='0'>\n      <tr>\n        <td align='left' valign='middle'></td>\n        <td align='right' valign='middle'>Powered by <a href='http://www.juniorriau.com/' target='_new'>juniorriau</a></td>\n      </tr>\n    </table>\n  </div>\n </div>\n</body>\n</html>\n\n   <?php \n\tif(isset($_GET['install']) && delete($_GET['install'])==\"step5\"){\n\t\t$data->addConfiguration('site_name',$_SESSION['step1']['site_name']);\n\t\t$data->addConfiguration('tag_line',$_SESSION['step1']['tag_line']);\n\t\t$data->addConfiguration('site_url',$_SESSION['step1']['site_url']);\n\t\t$data->addConfiguration('Email',$_SESSION['step1']['Email']);\n\t\t$data->addConfiguration('widget_use',$_SESSION['step1']['widget_use']);\n\t\t$data->addConfiguration('db_host',$_SESSION['step2']['db_host']);\t\t\n\t\t$data->addConfiguration('db_user',$_SESSION['step2']['db_user']);\n\t\t$data->addConfiguration('db_password',$_SESSION['step2']['db_password']);\n\t\t$data->addConfiguration('db_name',$_SESSION['step2']['db_name']);\n\t\t$data->addConfiguration('username',$_SESSION['step3']['username']);\n\t\t$data->addConfiguration('password',$_SESSION['step3']['password']);\n\t\t$result=$data->_install();\n\t\techo \"<form action='?install=step4' method='post' name='install' id='install'>\n\t\t\t\t  <table width='100%' border='0' cellspacing='0' cellpadding='5'>\n\t\t\t\t\t\n\t\t\t\t\t  \";\n\t\t\t\t\t  if($result['status']==\"ok\"){\n\t\t\t\t\t\t  echo \"\n\t\t\t\t\t\t  <tr>\n\t\t\t\t\t  <td width='30%' align='left' valign='middle' style='text-align:center;' colspan='2'/>\".$result['msg'].\"</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr><td width='30%' align='left' valign='middle' style='text-align:center;' colspan='2'>\n\t\t\t\t\t\t<input type='button' value='Login' style='width:100px;height:30px' onClick='window.location=\\\"../jr_login.php\\\"'/>\n\t\t\t\t\t  </td></tr>\";\n\t\t\t\t\t  }elseif($result['status']==\"failed\"){\n\t\t\t\t\t\t  echo \"\n\t\t\t\t\t\t  <tr>\n\t\t\t\t\t  <td width='30%' align='left' valign='middle' style='text-align:center;' colspan='2'/>\".$result['msg'].\"</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr><td width='30%' align='left' valign='middle' style='text-align:center;' colspan='2'>\n\t\t\t\t\t\t<input type='button' value='Login' style='width:100px;height:30px' onClick='window.location=\\\"?install=step1\\\"'/>\n\t\t\t\t\t  </td></tr>\";\n\t\t\t\t\t  }\n\t\t\t\t\t  echo\"\n\t\t\t\t  </table>\n\t\t\t\t</form>\";\n\t} // end step 5\n?>","undoManager":{"mark":-477,"position":100,"stack":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":29,"column":97},"end":{"row":29,"column":98}},"text":"y"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":29,"column":98},"end":{"row":29,"column":99}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":29,"column":99},"end":{"row":29,"column":100}},"text":"q"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":29,"column":100},"end":{"row":29,"column":101}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":29,"column":101},"end":{"row":30,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":0},"end":{"row":30,"column":1}},"text":"/"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":1},"end":{"row":30,"column":2}},"text":"/"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":2},"end":{"row":30,"column":3}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":3},"end":{"row":30,"column":4}},"text":"k"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":4},"end":{"row":30,"column":5}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":5},"end":{"row":30,"column":6}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":6},"end":{"row":30,"column":7}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":7},"end":{"row":30,"column":8}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":8},"end":{"row":30,"column":9}},"text":"u"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":9},"end":{"row":30,"column":10}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":10},"end":{"row":30,"column":11}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":11},"end":{"row":30,"column":12}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":12},"end":{"row":30,"column":13}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":13},"end":{"row":30,"column":14}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":14},"end":{"row":30,"column":15}},"text":"h"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":15},"end":{"row":30,"column":16}},"text":"u"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":30,"column":15},"end":{"row":30,"column":16}},"text":"u"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":30,"column":14},"end":{"row":30,"column":15}},"text":"h"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":30,"column":13},"end":{"row":30,"column":14}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":30,"column":12},"end":{"row":30,"column":13}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":30,"column":11},"end":{"row":30,"column":12}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":30,"column":10},"end":{"row":30,"column":11}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":30,"column":9},"end":{"row":30,"column":10}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":30,"column":8},"end":{"row":30,"column":9}},"text":"u"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":8},"end":{"row":30,"column":9}},"text":"b"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":9},"end":{"row":30,"column":10}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":10},"end":{"row":30,"column":11}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":11},"end":{"row":30,"column":12}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":12},"end":{"row":30,"column":13}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":13},"end":{"row":30,"column":14}},"text":"k"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":14},"end":{"row":30,"column":15}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":15},"end":{"row":30,"column":16}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":16},"end":{"row":30,"column":17}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":17},"end":{"row":30,"column":18}},"text":"k"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":18},"end":{"row":30,"column":19}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":19},"end":{"row":30,"column":20}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":20},"end":{"row":30,"column":21}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":21},"end":{"row":30,"column":22}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":30,"column":21},"end":{"row":30,"column":22}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":30,"column":20},"end":{"row":30,"column":21}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":20},"end":{"row":30,"column":21}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":21},"end":{"row":30,"column":22}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":22},"end":{"row":30,"column":23}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":23},"end":{"row":30,"column":24}},"text":"h"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":24},"end":{"row":30,"column":25}},"text":","}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":25},"end":{"row":30,"column":26}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":26},"end":{"row":30,"column":27}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":27},"end":{"row":30,"column":28}},"text":"g"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":28},"end":{"row":30,"column":29}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":29},"end":{"row":30,"column":30}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":30},"end":{"row":30,"column":31}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":31},"end":{"row":30,"column":32}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":32},"end":{"row":30,"column":33}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":33},"end":{"row":30,"column":34}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":34},"end":{"row":30,"column":35}},"text":"h"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":35},"end":{"row":30,"column":36}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":36},"end":{"row":30,"column":37}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":37},"end":{"row":30,"column":38}},"text":"u"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":38},"end":{"row":30,"column":39}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":39},"end":{"row":30,"column":40}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":40},"end":{"row":30,"column":41}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":41},"end":{"row":30,"column":42}},"text":"g"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":42},"end":{"row":30,"column":43}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":43},"end":{"row":30,"column":44}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":44},"end":{"row":30,"column":45}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":45},"end":{"row":30,"column":46}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":46},"end":{"row":30,"column":47}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":47},"end":{"row":30,"column":48}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":48},"end":{"row":30,"column":49}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":30,"column":48},"end":{"row":30,"column":49}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":30,"column":47},"end":{"row":30,"column":48}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":47},"end":{"row":30,"column":48}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":48},"end":{"row":30,"column":49}},"text":"g"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":49},"end":{"row":30,"column":50}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":50},"end":{"row":30,"column":51}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":51},"end":{"row":30,"column":52}},"text":"u"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":52},"end":{"row":30,"column":53}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":53},"end":{"row":30,"column":54}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":54},"end":{"row":30,"column":55}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":55},"end":{"row":30,"column":56}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":56},"end":{"row":30,"column":57}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":57},"end":{"row":30,"column":58}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":58},"end":{"row":30,"column":59}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":59},"end":{"row":30,"column":60}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":60},"end":{"row":30,"column":61}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":61},"end":{"row":30,"column":62}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":62},"end":{"row":30,"column":63}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":63},"end":{"row":30,"column":64}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":64},"end":{"row":30,"column":65}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":65},"end":{"row":30,"column":66}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":66},"end":{"row":30,"column":67}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":67},"end":{"row":30,"column":68}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":68},"end":{"row":30,"column":69}},"text":"w"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":69},"end":{"row":30,"column":70}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":70},"end":{"row":30,"column":71}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":71},"end":{"row":30,"column":72}},"text":"d"}]}]]},"ace":{"folds":[],"scrolltop":278,"scrollleft":0,"selection":{"start":{"row":30,"column":72},"end":{"row":30,"column":72},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":18,"state":"start","mode":"ace/mode/php"}},"timestamp":1415168087643}